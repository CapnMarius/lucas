(this["webpackJsonperwin-spotify"]=this["webpackJsonperwin-spotify"]||[]).push([[0],{170:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),o=n(15),i=n.n(o),c=n(242),s=n(241),l=n(80),u=n(16),d=n(100),p=n(7),h=n.n(p),j=n(11),b=n(27),m=n(46),f=n(78),v=n(8),g=n(103),x=n.n(g),O=function(){function e(t,n){Object(m.a)(this,e),this.api=null,this.spotifyStore=null,this.hostOrGuest=null,this.room=null,this.username=null,this.memories=[],this.socket=null,this.guests=0,this.songIdForMemory=null,this.popup=null,x()(this),this.api=t,this.spotifyStore=n}return Object(f.a)(e,[{key:"initialize",value:function(){var e=function(){var e=window.location.href;if(e.includes("?code")){var t=e.split("?code=")[1];return window.history.replaceState({},"",window.location.origin),t}}();e&&this.createRoom(e)}},{key:"initializeSocket",value:function(){var e=this;this.socket=this.api.getSocket(),this.socket.onopen=function(){e.sendMessage("SET_CLIENT_META",{room:e.room.code,hostOrGuest:e.hostOrGuest})},this.socket.onmessage=function(t){var n=JSON.parse(t.data);console.log("Received: '"+t.data+"'"),e.handleMessage(n.action,n)},this.spotifyStore.initialize(this.room,this.hostOrGuest,this.socket)}},{key:"handleMessage",value:function(e,t){"PING"!==e?"NEW_SONG"!==e?(this.isHost&&this.handleMessageFromGuest(e,t),this.isGuest&&this.handleMessageFromHost(e,t)):this.spotifyStore.getSongs():this.sendMessage("PONG")}},{key:"handleMessageFromGuest",value:function(e,t){if("UPDATE_GUEST_COUNT"===e){var n=t.count;this.guests=Number(n)}"NEW_MEMORY"===e&&this.getMemories()}},{key:"handleMessageFromHost",value:function(e,t){if("ROOM_CLOSED"===e&&window.location.reload(),"PLAYLIST_SET"===e){var n=t.playlist_id;this.spotifyStore.setPlaylist(n)}}},{key:"sendMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.socket.send(JSON.stringify(Object(b.a)({action:e,from:this.hostOrGuest},t)))}},{key:"leaveRoom",value:function(){var e;this.room=null,this.username=null,this.hostOrGuest=null,null===(e=this.socket)||void 0===e||e.close(),this.socket=null}},{key:"closeRoom",value:function(){var e=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.reload();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createRoom",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.localStorage.getItem("code"),a=window.localStorage.getItem("name"),e.prev=2,e.next=5,this.api.createRoom({code:t,room:{code:r,name:a}});case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("\ud83e\uddd9\u200d\u2642\ufe0f",e.t0);case 11:if(window.localStorage.removeItem("code"),window.localStorage.removeItem("name"),n){e.next=17;break}return this.room=null,this.hostOrGuest=null,e.abrupt("return");case 17:this.room=n,this.hostOrGuest="host",this.initializeSocket();case 20:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"generateRoom",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Math.floor(9e4*Math.random())+1e4,window.localStorage.setItem("name",t),window.localStorage.setItem("code",n),e.next=5,this.api.oauth();case 5:r=e.sent,window.location=r;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"joinRoom",value:function(){var e=Object(j.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.getRoom({code:n});case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:this.room=r,this.username=t,this.hostOrGuest="guest",this.initializeSocket();case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"openAddMemoryPopup",value:function(e){this.songIdForMemory=e,this.popup="addMemory"}},{key:"openAddSongPopup",value:function(){this.popup="addSong"}},{key:"closeAddMemoryPopup",value:function(){this.popup=null,this.songIdForMemory=null}},{key:"closeAddSongPopup",value:function(){this.popup=null}},{key:"addSong",value:function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.addSong({room_code:this.room.code,uri:t});case 2:this.spotifyStore.getSongs(),this.sendMessage("NEW_SONG");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addMemory",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,r=t.file,e.prev=1,e.next=4,this.api.saveMemory({room_code:this.room.code,song_id:this.songIdForMemory,user:this.username,text:n,filename:r.name});case 4:return a=e.sent,e.next=7,this.api.saveMemoryImage({upload_url:a,file:r});case 7:this.sendMessage("NEW_MEMORY"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("\ud83e\uddd9\u200d\u2642\ufe0f",e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteMemory",value:function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.deleteMemory({room_code:this.room.code,memory_id:t});case 3:this.memories=this.memories.filter((function(e){return(null===e||void 0===e?void 0:e.pk)!==t})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("\ud83e\uddd9\u200d\u2642\ufe0f",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMemories",value:function(){var e=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.getMemories({room_code:this.room.code});case 3:this.memories=e.sent,console.log(JSON.parse(JSON.stringify(this.memories))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("\ud83e\uddd9\u200d\u2642\ufe0f",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"setSelectedSong",value:function(e){this.songIdForMemory=e}},{key:"nav",get:function(){return this.hostOrGuest?"host"===this.hostOrGuest?"host":"guest":"landing_page"}},{key:"isHost",get:function(){return"host"===this.hostOrGuest}},{key:"isGuest",get:function(){return"guest"===this.hostOrGuest}},{key:"selectedSong",get:function(){var e=this;return this.spotifyStore.songs.find((function(t){return t.id===e.songIdForMemory}))}}]),e}();Object(v.e)(O,{hostOrGuest:v.g,username:v.g,room:v.g,guests:v.g,memories:v.g,songIdForMemory:v.g,popup:v.g,initialize:v.b,createRoom:v.b,leaveRoom:v.b,openAddMemoryPopup:v.b,openAddSongPopup:v.b,closeAddMemoryPopup:v.b,closeAddSongPopup:v.b,deleteMemory:v.b,setSelectedSong:v.b,nav:v.c,isHost:v.c,isGuest:v.c,selectedSong:v.c});var y=function(){function e(t,n){var r=this;Object(m.a)(this,e),this.initialize=function(){var e=Object(j.a)(h.a.mark((function e(t,n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.token=t.access_token,r.room_code=t.code,r.room_name=t.name,r.hostOrGuest=n,r.isHost&&(r.socket=a,r.preparePlayer(),r.getPlaylists()),r.isGuest&&t.playlist_id&&r.setPlaylist(t.playlist_id);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.preparePlayer=function(){return new Promise((function(e,t){if(window.onSpotifyWebPlaybackSDKReady?r.startPlayer():window.onSpotifyWebPlaybackSDKReady=r.startPlayer,document.getElementById("spotify-player"))e();else{var n=document.createElement("script");n.id="spotify-player",n.type="text/javascript",n.async=!1,n.defer=!0,n.src="https://sdk.scdn.co/spotify-player.js",n.onload=function(){return e()},n.onerror=function(e){return t(new Error("loadScript: ".concat(e.message)))},document.head.appendChild(n)}}))},this.startPlayer=function(){r.player=new window.Spotify.Player({getOAuthToken:function(e){e(r.token)},name:"Playlist Memories",volume:1}),r.player.addListener("ready",(function(e){r.device_id=e.device_id})),r.player.addListener("not_ready",(function(e){console.log("not_ready",e)})),r.player.addListener("player_state_changed",(function(e){r.player_state=e})),r.player.addListener("initialization_error",(function(e){return console.log("initialization_error",e.message)})),r.player.addListener("authentication_error",(function(e){return console.log("authentication_error",e.message)})),r.player.addListener("account_error",(function(e){return console.log("account_error",e.message)})),r.player.addListener("playback_error",(function(e){return console.log("playback_error",e.message)})),r.player.connect()},this.getPlaylists=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.api.getPlaylists({room_code:r.room_code});case 3:r.playlists=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0,"Failed to get playlists!");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),this.setPlaylist=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isHost){e.next=8;break}return e.next=3,r.api.setPlaylist({room_code:r.room_code,playlist_id:t});case 3:if(e.sent){e.next=7;break}return console.log("\ud83d\udc72","Failed to set playlist in room!!"),e.abrupt("return");case 7:r.sendMessage("PLAYLIST_SET",{playlist_id:t});case 8:r.playlist_id=t,t&&r.getSongs();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createPlaylist=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isGuest){e.next=2;break}throw new Error("Trying to create playlist as guest, this should not be possible!");case 2:return e.next=4,r.api.createPlaylist({room_code:r.room_code,name:r.room_name,description:"A playlist created with Playlist Memories"});case 4:if(t=e.sent){e.next=8;break}return console.log("\ud83d\udc69\u200d\ud83c\udfa4","Failed to create playlist!"),e.abrupt("return");case 8:return e.next=10,r.getPlaylists();case 10:r.setPlaylist(t);case 11:case"end":return e.stop()}}),e)}))),this.search=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.api.search({query:t,room_code:r.room_code}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getSongs=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.songs=[],e.prev=1,e.next=4,r.api.getSongs({room_code:r.room_code});case 4:r.songs=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0,"Failed to get songs!");case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),this.playSong=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.spotify_api.playSong({device_id:r.device_id,token:r.token,uri:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0,"Failed to play song!");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),this.queueSong=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.spotify_api.queueSong({device_id:r.device_id,token:r.token,uri:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0,"Failed to queue song!");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),this.togglePlayback=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.spotify_api.togglePlayback({playback:r.paused?"play":"pause",device_id:r.device_id,token:r.token});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0,"Failed to toggle playback!");case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),this.nextSong=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.spotify_api.next({device_id:r.device_id,token:r.token});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0,"Failed to toggle playback!");case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),this.setCurrentSong=function(e){r.player_state={track_window:{current_track:{id:e}}}},this.api=t,this.spotify_api=n,this.token=null,this.room_code=null,this.room_name=null,this.player=null,this.device_id=null,this.player_state=null,this.playlists=[],this.playlist_id=null,this.songs=[],this.song_id=null,this.socket=null,this.hostOrGuest=null}return Object(f.a)(e,[{key:"sendMessage",value:function(e,t){this.socket.send(JSON.stringify(Object(b.a)({action:e,from:this.hostOrGuest},t)))}},{key:"paused",get:function(){var e,t;return null===(e=null===(t=this.player_state)||void 0===t?void 0:t.paused)||void 0===e||e}},{key:"current_song",get:function(){var e=this;return this.songs.find((function(t){var n,r,a;return t.id===(null===(n=e.player_state)||void 0===n||null===(r=n.track_window)||void 0===r||null===(a=r.current_track)||void 0===a?void 0:a.id)}))}},{key:"playlist",get:function(){var e,t=this;return null===(e=this.playlists)||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t.playlist_id}))}},{key:"isHost",get:function(){return"host"===this.hostOrGuest}},{key:"isGuest",get:function(){return"guest"===this.hostOrGuest}}]),e}();Object(v.e)(y,{token:v.g,player:v.g,device_id:v.g,player_state:v.g,playlists:v.g,playlist_id:v.g,room_code:v.g,room_name:v.g,songs:v.g,song_id:v.g,initialize:v.b,startPlayer:v.b,getPlaylists:v.b,setPlaylist:v.b,getSongs:v.b,setSong:v.b,setCurrentSong:v.b,goBack:v.b,paused:v.c,current_song:v.c,isHost:v.c,isGuest:v.c});var k=n(20),w=n.n(k),S=function e(){var t=this;Object(m.a)(this,e),this.playSong=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.token,a=n.device_id,o=n.uri,e.next=3,w.a.put("".concat(t.base,"/me/player/play")).set({Authorization:"Bearer ".concat(r)}).query({device_id:a}).send({uris:[o]});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.queueSong=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.token,a=n.device_id,o=n.uri,e.next=3,w.a.post("".concat(t.base,"/me/player/queue")).set({Authorization:"Bearer ".concat(r)}).query({device_id:a,uri:o});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.togglePlayback=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.token,a=n.device_id,o=n.playback,e.next=3,w.a.put("".concat(t.base,"/me/player/").concat(o)).set({Authorization:"Bearer ".concat(r)}).query({device_id:a});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.next=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.token,a=n.device_id,e.next=3,w.a.post("".concat(t.base,"/me/player/next")).set({Authorization:"Bearer ".concat(r)}).query({device_id:a});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.base="https://api.spotify.com/v1"},_=n(116),N=n(37),C=new function e(){var t=this;Object(m.a)(this,e),this.getSocket=function(){return new WebSocket("".concat("development"===N.a.NODE_ENV?"ws":"wss","://").concat("development"===N.a.NODE_ENV?N.a.BACKEND_BASE_DEV:N.a.BACKEND_BASE_PRD))},this.oauth=Object(j.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("".concat(t.base,"/authorize"));case 3:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.text);case 7:e.prev=7,e.t0=e.catch(0),console.log("\ud83d\udc51",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.getRoom=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.code,e.prev=1,e.next=4,w.a.get("".concat(t.base,"/room/").concat(r));case 4:return o=e.sent,e.abrupt("return",null===o||void 0===o||null===(a=o.body)||void 0===a?void 0:a.room);case 8:return e.prev=8,e.t0=e.catch(1),console.log("\ud83e\uddb8\u200d\u2642\ufe0f",e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.createRoom=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room,a=n.code,e.prev=1,e.next=4,w.a.post("".concat(t.base,"/room")).send({room:r,code:a});case 4:return i=e.sent,e.abrupt("return",null===i||void 0===i||null===(o=i.body)||void 0===o?void 0:o.room);case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlaylists=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room_code,e.prev=1,e.next=4,w.a.get("".concat(t.base,"/room/").concat(r,"/playlists"));case 4:return a=e.sent,e.abrupt("return",a.body||[]);case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\udc41",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.setPlaylist=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room_code,a=n.playlist_id,e.prev=1,e.next=4,w.a.put("".concat(t.base,"/room/").concat(r,"/playlist")).send({playlist_id:a});case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(1),console.log("\ud83d\udc41",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.createPlaylist=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room_code,a=n.name,o=n.description,e.prev=1,e.next=4,w.a.post("".concat(t.base,"/room/").concat(r,"/playlist")).send({name:a,description:o});case 4:return i=e.sent,e.abrupt("return",null===i||void 0===i?void 0:i.text);case 8:return e.prev=8,e.t0=e.catch(1),console.log("\ud83d\ude10",e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.getSongs=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room_code,e.prev=1,e.next=4,w.a.get("".concat(t.base,"/room/").concat(r,"/songs"));case 4:return a=e.sent,e.abrupt("return",(null===a||void 0===a?void 0:a.body)||[]);case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\udc42",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.addSong=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room_code,a=n.uri,e.next=3,w.a.put("".concat(t.base,"/room/").concat(r,"/songs/").concat(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.search=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room_code,a=n.query,e.prev=1,e.next=4,w.a.get("".concat(t.base,"/room/").concat(r,"/search/").concat(a));case 4:return o=e.sent,e.abrupt("return",(null===o||void 0===o?void 0:o.body)||[]);case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.getMemories=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room_code,e.prev=1,e.next=4,w.a.get("".concat(t.base,"/room/").concat(r,"/memories"));case 4:return a=e.sent,e.abrupt("return",(null===a||void 0===a?void 0:a.body)||[]);case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\ude4f",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.saveMemory=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a,o,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room_code,a=n.song_id,o=Object(_.a)(n,["room_code","song_id"]),e.prev=1,e.next=4,w.a.put("".concat(t.base,"/room/").concat(r,"/memories")).send(Object(b.a)(Object(b.a)({},o),{},{song_id:a}));case 4:return c=e.sent,e.abrupt("return",null===c||void 0===c||null===(i=c.body)||void 0===i?void 0:i.upload_url);case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\ude4f",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.saveMemoryImage=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,r=t.upload_url,e.prev=1,e.next=4,w.a.put(r).set("Content-Type",n.type).send(n);case 4:return e.abrupt("return",!0);case 7:e.prev=7,e.t0=e.catch(1),console.log("\ud83d\ude4f",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteMemory=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.room_code,a=n.memory_id,e.prev=1,e.next=4,w.a.delete("".concat(t.base,"/room/").concat(r,"/memories/").concat(a));case 4:return e.abrupt("return",!0);case 7:e.prev=7,e.t0=e.catch(1),console.log("\ud83d\ude4f",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.base="development"===N.a.NODE_ENV?"".concat(N.a.PROTOCOL_DEV,"://").concat(N.a.BACKEND_BASE_DEV):"".concat(N.a.PROTOCOL_PRD,"://").concat(N.a.BACKEND_BASE_PRD)},M=new y(C,new S),P=new O(C,M),G=Object(a.createContext)({applicationStore:P,spotifyStore:M}),z=function(){return Object(a.useContext)(G)},E=n(23),A=n(32),F=n(210),R=n(247),I=n(212),T=n(213),B=n(211),D=n(215),W=n(214),L=n(243),q=n(81),J=function(){var e=Object(q.useMediaQuery)({minWidth:1280}),t=Object(q.useMediaQuery)({minWidth:960}),n=Object(q.useMediaQuery)({minWidth:600});return e?"large":t?"medium":n?"small":"mobile"},H=Object(F.a)((function(e){return{dialog:Object(A.a)({},e.breakpoints.up("sm"),{width:"34rem",height:"15rem"})}})),K=function(e){var t=e.onCreate,n=e.onJoin;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(B.a,{children:"Playlist Memories"}),Object(r.jsx)(I.a,{children:"Share the memories you've made with a song from your favorite playlist!"}),Object(r.jsx)(T.a,{children:Object(r.jsxs)(W.a,{container:!0,spacing:2,children:[Object(r.jsx)(W.a,{item:!0,xs:6,children:Object(r.jsx)(D.a,{fullWidth:!0,size:"medium",color:"primary",variant:"contained",onClick:t,children:"Create room"})}),Object(r.jsx)(W.a,{item:!0,xs:6,children:Object(r.jsx)(D.a,{fullWidth:!0,size:"medium",color:"primary",variant:"contained",onClick:n,children:"Join room"})})]})})]})},U=function(e){var t=e.onCreate,n=e.onGoBack,o=Object(a.useState)(""),i=Object(E.a)(o,2),c=i[0],s=i[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(B.a,{children:"Create room"}),Object(r.jsx)(I.a,{children:Object(r.jsx)(L.a,{fullWidth:!0,variant:"outlined",size:"small",label:"Room name",onChange:function(e){s(e.target.value)},value:c})}),Object(r.jsx)(T.a,{children:Object(r.jsxs)(W.a,{container:!0,spacing:2,children:[Object(r.jsx)(W.a,{item:!0,xs:6,children:Object(r.jsx)(D.a,{fullWidth:!0,size:"medium",color:"secondary",variant:"contained",onClick:n,children:"Go back"})}),Object(r.jsx)(W.a,{item:!0,xs:6,children:Object(r.jsx)(D.a,{fullWidth:!0,size:"medium",color:"primary",variant:"contained",disabled:!c,onClick:function(){t(c)},children:"Create room"})})]})})]})},V=function(e){var t=e.onJoin,n=e.onGoBack,o=Object(a.useState)(""),i=Object(E.a)(o,2),c=i[0],s=i[1],l=Object(a.useState)(""),u=Object(E.a)(l,2),d=u[0],p=u[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(B.a,{children:"Join room"}),Object(r.jsx)(I.a,{children:Object(r.jsxs)(W.a,{container:!0,spacing:2,children:[Object(r.jsx)(W.a,{item:!0,xs:12,children:Object(r.jsx)(L.a,{fullWidth:!0,variant:"outlined",size:"small",label:"Username",onChange:function(e){s(e.target.value)},value:c})}),Object(r.jsx)(W.a,{item:!0,xs:12,children:Object(r.jsx)(L.a,{fullWidth:!0,variant:"outlined",size:"small",label:"Room code",onChange:function(e){p(e.target.value)},value:d})})]})}),Object(r.jsx)(T.a,{children:Object(r.jsxs)(W.a,{container:!0,spacing:2,children:[Object(r.jsx)(W.a,{item:!0,xs:6,children:Object(r.jsx)(D.a,{fullWidth:!0,size:"medium",color:"secondary",variant:"contained",onClick:n,children:"Go back"})}),Object(r.jsx)(W.a,{item:!0,xs:6,children:Object(r.jsx)(D.a,{fullWidth:!0,size:"medium",color:"primary",variant:"contained",disabled:!c||5!==(null===d||void 0===d?void 0:d.length),onClick:function(){t(c,d)},children:"Join room"})})]})})]})},Y=Object(u.a)((function(){var e=z().applicationStore,t=e.generateRoom,n=e.joinRoom,o=H(),i=J(),c=Object(a.useState)("initial"),s=Object(E.a)(c,2),l=s[0],u=s[1];return Object(r.jsxs)(R.a,{onClose:function(){},open:!0,fullScreen:"mobile"===i,classes:{paper:o.dialog},children:["initial"===l&&Object(r.jsx)(K,{onCreate:function(){return u("create")},onJoin:function(){return u("join")}}),"create"===l&&Object(r.jsx)(U,{onCreate:function(e){return t(e)},onGoBack:function(){return u("initial")}}),"join"===l&&Object(r.jsx)(V,{onJoin:function(e,t){return n(e,t)},onGoBack:function(){return u("initial")}})]})})),Q=n(218),X=n(219),Z=n(249),$=n(115),ee=n(222),te=n(220),ne=n(221),re=Object(F.a)((function(e){return{grow:{flexGrow:1},appbar:{flex:"0 0 auto"},chip:{marginRight:e.spacing(1)}}})),ae=Object(u.a)((function(){var e=z().applicationStore,t=e.nav,n=e.username,o=e.leaveRoom,i=e.closeRoom,c=e.room,s=e.guests,l=re(),u=Object(a.useState)(null),d=Object(E.a)(u,2),p=d[0],h=d[1];return Object(r.jsx)(Q.a,{position:"static",className:l.appbar,children:Object(r.jsxs)(X.a,{children:[Object(r.jsx)(Z.a,{icon:Object(r.jsx)(te.a,{}),label:"".concat(null===c||void 0===c?void 0:c.name),className:l.chip}),"guest"===t&&Object(r.jsx)(Z.a,{icon:Object(r.jsx)(ne.a,{}),label:"".concat(n),className:l.chip}),"host"===t&&Object(r.jsx)(Z.a,{icon:Object(r.jsx)(ne.a,{}),label:"".concat(s),className:l.chip}),Object(r.jsx)("div",{className:l.grow}),c&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(D.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return h(e.currentTarget)},children:["Code: ",c.code]}),Object(r.jsx)($.a,{anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:function(){return h(null)},children:Object(r.jsxs)(ee.a,{onClick:"guest"===t?o:i,children:["guest"===t?"Leave":"Close"," room"]})})]})]})})})),oe=n(120),ie=n(65),ce=n(245),se=n(238),le=n(239),ue=n(244),de=n(226),pe=n(227),he=n(228),je=n(223),be=n(224),me=n(225),fe=n(229),ve=Object(F.a)((function(e){return{root:{display:"flex",flexGrow:"1"},details:{display:"flex",flex:"1 1 auto",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:151},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},playIcon:{height:38,width:38}}})),ge=Object(u.a)((function(){var e,t=ve(),n=z().spotifyStore,a=n.paused,o=n.current_song,i=n.togglePlayback,c=n.nextSong;return o?Object(r.jsxs)(je.a,{className:t.root,children:[Object(r.jsxs)("div",{className:t.details,children:[Object(r.jsxs)(be.a,{className:t.content,children:[Object(r.jsx)(ie.a,{component:"h5",variant:"h5",children:(null===o||void 0===o?void 0:o.title)||""}),Object(r.jsx)(ie.a,{variant:"subtitle1",color:"textSecondary",children:(null===o||void 0===o||null===(e=o.artists)||void 0===e?void 0:e.join(", "))||""})]}),Object(r.jsxs)("div",{className:t.controls,children:[Object(r.jsx)(me.a,{"aria-label":"play/pause",disabled:!o,onClick:i,children:a?Object(r.jsx)(de.a,{className:t.playIcon}):Object(r.jsx)(pe.a,{className:t.playIcon})}),Object(r.jsx)(me.a,{"aria-label":"next",disabled:!o,onClick:c,children:Object(r.jsx)(he.a,{})})]})]}),Object(r.jsx)(fe.a,{className:t.cover,image:(null===o||void 0===o?void 0:o.img)||"",title:"Album cover"})]}):null})),xe=n(217),Oe=n(172),ye=n(230),ke=n(250),we=n(231),Se=n(232),_e=n(233),Ne=Object(F.a)((function(e){return{paper:{padding:e.spacing(3),height:"100%",overflow:"hidden"},playlists:{width:"100%",height:"100%",overflow:"scroll"},playlist:{cursor:"pointer","&:hover":{background:e.palette.background.default}},choosePlaylistBanner:{display:"flex",alignItems:"center"}}})),Ce=Object(u.a)((function(){var e=z().spotifyStore,t=e.playlists,n=e.setPlaylist,a=e.createPlaylist,o=Ne();return Object(r.jsxs)(oe.a,{className:o.paper,children:[Object(r.jsxs)("div",{className:o.choosePlaylistBanner,children:[Object(r.jsx)(ie.a,{variant:"subtitle1",children:"Choose a playlist... Or\xa0"}),Object(r.jsx)(D.a,{color:"primary",onClick:a,children:"Create a playlist"})]}),Object(r.jsx)(xe.a,{className:o.playlists,children:t.map((function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Oe.a,{alignItems:"flex-start",className:o.playlist,children:[Object(r.jsx)(ye.a,{children:Object(r.jsx)(ke.a,{alt:"",src:(null===e||void 0===e?void 0:e.img)||""})}),Object(r.jsx)(we.a,{primary:(null===e||void 0===e?void 0:e.title)||"",secondary:Object(r.jsx)(r.Fragment,{children:(null===e||void 0===e?void 0:e.owner)||""})}),Object(r.jsx)(Se.a,{children:Object(r.jsx)(D.a,{color:"primary",onClick:function(){return n(null===e||void 0===e?void 0:e.id)},children:"Select"})})]}),Object(r.jsx)(_e.a,{variant:"inset",component:"li"})]},(null===e||void 0===e?void 0:e.id)||t)}))})]})})),Me=n(234),Pe=n(235),Ge=Object(F.a)((function(e){return{card:{background:"#f0f0f0",height:"100%"},memories:{overflowY:"auto",marginTop:".5rem"},image:{height:"10rem"},selectedSong:{marginTop:".5rem"},selectedSongText:{marginRight:".5rem"}}})),ze=Object(u.a)((function(){var e=z(),t=e.applicationStore,n=t.memories,a=t.deleteMemory,o=t.selectedSong,i=t.setSelectedSong,c=e.spotifyStore.current_song,s=Ge(),l=n.filter((function(e){return e.song_id===((null===o||void 0===o?void 0:o.id)||(null===c||void 0===c?void 0:c.id))}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:o?Object(r.jsxs)(W.a,{container:!0,className:s.selectedSong,children:[Object(r.jsxs)(ie.a,{variant:"h5",className:s.selectedSongText,children:["Memories for selected song:"," "]}),Object(r.jsx)(Z.a,{color:"secondary",label:(null===o||void 0===o?void 0:o.title)||"Selected song",avatar:Object(r.jsx)(ke.a,{children:"S"}),onDelete:function(){i()}})]}):Object(r.jsx)(ie.a,{variant:"h5",className:s.selectedSong,children:"Memories for current song: ".concat((null===c||void 0===c?void 0:c.title)||"-")})}),Object(r.jsx)(W.a,{container:!0,spacing:2,className:s.memories,children:l.map((function(e,t){return Object(r.jsx)(W.a,{item:!0,xs:4,children:Object(r.jsxs)(je.a,{className:s.card,children:[Object(r.jsxs)(Me.a,{children:[Object(r.jsx)(fe.a,{className:s.image,square:!0,image:(null===e||void 0===e?void 0:e.downloadUrl)||"",title:"Memory"}),Object(r.jsxs)(be.a,{children:[Object(r.jsx)(ie.a,{gutterBottom:!0,variant:"h5",component:"h2",children:(null===e||void 0===e?void 0:e.user)||"-"}),Object(r.jsx)(ie.a,{variant:"body2",color:"textSecondary",component:"p",children:(null===e||void 0===e?void 0:e.text)||"-"})]})]}),Object(r.jsx)(Pe.a,{children:Object(r.jsx)(D.a,{size:"small",color:"primary",onClick:function(){return a(null===e||void 0===e?void 0:e.pk)},children:"Remove"})})]})},(null===e||void 0===e?void 0:e.id)||t)}))})]})})),Ee=n(236),Ae=Object(F.a)((function(e){return{songs:{overflow:"scroll",width:"100%",flex:"1 1 auto"},song:{cursor:"pointer","&:hover":{background:e.palette.background.default}}}})),Fe=Object(u.a)((function(e){var t=e.onSelectSong,n=z(),a=n.applicationStore,o=a.memories,i=a.setSelectedSong,c=n.spotifyStore,s=c.songs,l=c.playSong,u=c.queueSong,d=Ae();return Object(r.jsx)(xe.a,{className:d.songs,children:s.map((function(e,n){var a,c;return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Oe.a,{alignItems:"flex-start",className:d.song,children:[Object(r.jsx)(ye.a,{children:Object(r.jsx)(ke.a,{alt:"",src:(null===e||void 0===e?void 0:e.img)||""})}),Object(r.jsx)(we.a,{primary:(null===e||void 0===e?void 0:e.title)||"",secondary:Object(r.jsx)(r.Fragment,{children:(null===e||void 0===e||null===(a=e.artists)||void 0===a?void 0:a.join(", "))||""})}),Object(r.jsxs)(Se.a,{children:[Object(r.jsx)(Z.a,{color:"secondary",label:"".concat(null===o||void 0===o||null===(c=o.filter((function(t){return(null===t||void 0===t?void 0:t.song_id)===(null===e||void 0===e?void 0:e.id)})))||void 0===c?void 0:c.length),onClick:function(){i(null===e||void 0===e?void 0:e.id),t()}}),Object(r.jsx)(me.a,{"aria-label":"play",onClick:function(){return l(null===e||void 0===e?void 0:e.uri)},children:Object(r.jsx)(de.a,{})}),Object(r.jsx)(me.a,{"aria-label":"queue",onClick:function(){return u(null===e||void 0===e?void 0:e.uri)},children:Object(r.jsx)(Ee.a,{})})]})]}),Object(r.jsx)(_e.a,{variant:"inset",component:"li"})]},(null===e||void 0===e?void 0:e.id)||n)}))})})),Re=n(237);var Ie=Object(F.a)((function(e){return{"@global":{".dropzone":{height:"10rem",minHeight:"unset"},".dropzone .MuiDropzonePreviewList-root":{marginLeft:"-28px",marginTop:"-119px"}},dialog:Object(A.a)({},e.breakpoints.up("sm"),{width:"34rem"}),dialogcontent:{height:"23rem",display:"flex",flexDirection:"column"}}})),Te=Object(u.a)((function(){var e=z(),t=e.applicationStore,n=t.closeAddSongPopup,o=t.addSong,i=e.spotifyStore,c=i.playlist,s=i.search,u=Ie(),d=function(){var e=Object(l.b)().enqueueSnackbar;return{addToast:function(t,n){e(t,Object(b.a)({anchorOrigin:{horizontal:"right",vertical:"bottom"}},n||{}))}}}().addToast,p=J(),h=Object(a.useState)(""),j=Object(E.a)(h,2),m=j[0],f=j[1],v=Object(a.useState)(null),g=Object(E.a)(v,2),x=g[0],O=g[1],y=Object(a.useState)([]),k=Object(E.a)(y,2),w=k[0],S=k[1];return Object(r.jsxs)(R.a,{onClose:function(){},open:!0,fullScreen:"mobile"===p,classes:{paper:u.dialog},children:[Object(r.jsxs)(B.a,{children:["Add song to playlist: ",(null===c||void 0===c?void 0:c.title)||""]}),Object(r.jsxs)(I.a,{className:u.dialogcontent,children:[Object(r.jsx)("div",{style:{flex:"0 0 auto"},children:Object(r.jsx)(L.a,{fullWidth:!0,variant:"outlined",label:"Search",onChange:function(e){var t;t=e.target.value,f(t),clearTimeout(x),O(setTimeout((function(){return s(t).then((function(e){S(e||[])})).catch((function(){}))}),500))},value:m})}),Object(r.jsx)("div",{style:{overflow:"auto",flex:"1 1 auto"},children:Object(r.jsx)(xe.a,{children:w.map((function(e,t){var n;return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Oe.a,{alignItems:"flex-start",className:u.song,children:[Object(r.jsx)(ye.a,{children:Object(r.jsx)(ke.a,{alt:"",src:(null===e||void 0===e?void 0:e.img)||""})}),Object(r.jsx)(we.a,{primary:(null===e||void 0===e?void 0:e.title)||"",secondary:Object(r.jsx)(r.Fragment,{children:(null===e||void 0===e||null===(n=e.artists)||void 0===n?void 0:n.join(", "))||""})}),Object(r.jsx)(Se.a,{children:Object(r.jsx)(me.a,{"aria-label":"play",onClick:function(){return o(null===e||void 0===e?void 0:e.uri).then((function(){d("Song added",{variant:"success"})})).catch((function(){d("Something went wrong",{variant:"error"})}))},children:Object(r.jsx)(Re.a,{})})})]}),Object(r.jsx)(_e.a,{variant:"inset",component:"li"})]},(null===e||void 0===e?void 0:e.id)||t)}))})})]}),Object(r.jsx)(T.a,{children:Object(r.jsx)(W.a,{container:!0,spacing:2,children:Object(r.jsx)(W.a,{item:!0,xs:12,children:Object(r.jsx)(D.a,{fullWidth:!0,size:"medium",color:"secondary",variant:"contained",onClick:n,children:"Done"})})})})]})})),Be=Object(F.a)((function(e){return{container:{flex:"1 1 auto",overflow:"hidden"},box:{height:"100%",overflow:"hidden",paddingTop:e.spacing(3)},songspaper:{padding:e.spacing(3),height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},gridRoot:{height:"100%",flexWrap:"unset"},flexshrink:{flex:"0 0 auto"},playlistscontainer:{overflow:"hidden",flex:"1 1 auto"},songsBanner:{display:"flex",alignItems:"center",justifyContent:"space-between"}}})),De=Object(u.a)((function(){var e=z(),t=e.applicationStore.openAddSongPopup,n=e.spotifyStore.playlist,o=Be(),i=Object(a.useState)(0),c=Object(E.a)(i,2),s=c[0],l=c[1];return Object(r.jsxs)(oe.a,{className:o.songspaper,children:[Object(r.jsxs)("div",{className:o.songsBanner,children:[Object(r.jsx)(ie.a,{component:"h5",variant:"h5",children:"".concat((null===n||void 0===n?void 0:n.title)||"")}),Object(r.jsx)(D.a,{color:"primary",onClick:t,children:"Add a song"})]}),Object(r.jsxs)(ce.a,{className:o.tabs,value:s,onChange:function(e,t){return l(t)},"aria-label":"tabs",variant:"fullWidth",children:[Object(r.jsx)(se.a,{label:"Play or queue songs",id:"songs"}),Object(r.jsx)(se.a,{label:"Memories",id:"memories"})]}),0===s&&Object(r.jsx)(Fe,{onSelectSong:function(){return l(1)}}),1===s&&Object(r.jsx)(ze,{})]})})),We=Object(u.a)((function(){var e=z(),t=e.applicationStore.popup,n=e.spotifyStore.playlist_id,a=Be();return Object(r.jsxs)(r.Fragment,{children:["addSong"===t&&Object(r.jsx)(Te,{}),Object(r.jsx)(le.a,{className:a.container,children:Object(r.jsx)(ue.a,{className:a.box,children:Object(r.jsxs)(W.a,{container:!0,spacing:2,direction:"column",className:a.gridRoot,children:[Object(r.jsx)(W.a,{item:!0,xs:12,className:a.flexshrink,children:Object(r.jsx)(ge,{})}),Object(r.jsx)(W.a,{item:!0,xs:12,className:a.playlistscontainer,children:n?Object(r.jsx)(De,{}):Object(r.jsx)(Ce,{})})]})})})]})})),Le=n(240),qe=Object(F.a)((function(e){return{songs:{overflow:"scroll",width:"100%",flex:"1 1 auto"},song:{cursor:"pointer","&:hover":{background:e.palette.background.default}}}})),Je=Object(u.a)((function(){var e=z(),t=e.applicationStore,n=t.openAddMemoryPopup,a=t.openAddSongPopup,o=e.spotifyStore,i=o.songs,c=o.playlist,s=qe();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(r.jsx)("div",{children:"\xa0"}),Object(r.jsx)(D.a,{color:"primary",onClick:a,children:"Add a song"})]}),Object(r.jsxs)(xe.a,{className:s.songs,children:[Object(r.jsx)(ie.a,{component:"h5",variant:"h5",children:"".concat((null===c||void 0===c?void 0:c.title)||"")}),i.map((function(e,t){var a;return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Oe.a,{alignItems:"flex-start",className:s.song,children:[Object(r.jsx)(ye.a,{children:Object(r.jsx)(ke.a,{alt:"",src:(null===e||void 0===e?void 0:e.img)||""})}),Object(r.jsx)(we.a,{primary:(null===e||void 0===e?void 0:e.title)||"",secondary:Object(r.jsx)(r.Fragment,{children:(null===e||void 0===e||null===(a=e.artists)||void 0===a?void 0:a.join(", "))||""})}),Object(r.jsx)(Se.a,{children:Object(r.jsx)(me.a,{"aria-label":"add-memory",onClick:function(){return n(null===e||void 0===e?void 0:e.id)},children:Object(r.jsx)(Le.a,{})})})]}),Object(r.jsx)(_e.a,{variant:"inset",component:"li"})]},(null===e||void 0===e?void 0:e.id)||t)}))]})]})})),He=n(114),Ke=Object(F.a)((function(e){return{"@global":{".dropzone":{height:"10rem",minHeight:"unset"},".dropzone .MuiDropzonePreviewList-root":{marginLeft:"-28px",marginTop:"-119px"}},dialog:Object(A.a)({},e.breakpoints.up("sm"),{width:"34rem"}),dialogcontent:{height:"23rem"}}})),Ue=Object(u.a)((function(){var e,t=z().applicationStore,n=t.selectedSong,o=t.closeAddMemoryPopup,i=t.addMemory,c=Ke(),s=J(),l=Object(a.useState)({}),u=Object(E.a)(l,2),d=u[0],p=u[1],m=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(E.a)(t,1),r=n[0]){e.next=3;break}return e.abrupt("return");case 3:p(Object(b.a)(Object(b.a)({},d),{},{file:r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(R.a,{onClose:function(){},open:!0,fullScreen:"mobile"===s,classes:{paper:c.dialog},children:[Object(r.jsxs)(B.a,{children:["Add memory to song: ",(null===n||void 0===n?void 0:n.title)||""]}),Object(r.jsxs)(I.a,{className:c.dialogcontent,children:[Object(r.jsx)(W.a,{container:!0,spacing:2,children:Object(r.jsx)(W.a,{item:!0,xs:12,children:Object(r.jsx)(L.a,{fullWidth:!0,variant:"outlined",multiline:!0,rows:7,label:"Memory",onChange:function(e){p(Object(b.a)(Object(b.a)({},d),{},{text:"".concat(e.target.value).substr(0,300)}))},value:(null===d||void 0===d?void 0:d.text)||""})})}),Object(r.jsx)(W.a,{container:!0,spacing:2,children:Object(r.jsx)(W.a,{item:!0,xs:12,children:Object(r.jsx)(He.a,{dropzoneClass:"dropzone",onChange:m,filesLimit:1,acceptedFiles:["image/*"],dropzoneText:"Upload an image"})})})]}),Object(r.jsx)(T.a,{children:Object(r.jsxs)(W.a,{container:!0,spacing:2,children:[Object(r.jsx)(W.a,{item:!0,xs:6,children:Object(r.jsx)(D.a,{fullWidth:!0,size:"medium",color:"secondary",variant:"contained",onClick:o,children:"Cancel"})}),Object(r.jsx)(W.a,{item:!0,xs:6,children:Object(r.jsx)(D.a,{fullWidth:!0,disabled:!(null===d||void 0===d?void 0:d.file)||(null===d||void 0===d||null===(e=d.text)||void 0===e?void 0:e.length)<10,size:"medium",color:"primary",variant:"contained",onClick:function(){i(d),o()},children:"Send"})})]})})]})})),Ve=Object(F.a)((function(e){return{noplaylist:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}})),Ye=function(){var e=Ve();return Object(r.jsx)("div",{className:e.noplaylist,children:Object(r.jsx)(ie.a,{variant:"subtitle1",children:"The host is still choosing a playlist"})})},Qe=Object(F.a)((function(e){return{container:{flex:"1 1 auto",overflow:"hidden"},box:{height:"100%",overflow:"hidden",paddingTop:e.spacing(3)},gridRoot:{height:"100%",flexWrap:"unset"},songscontainer:{overflow:"hidden",flex:"1 1 auto"},songspaper:{padding:e.spacing(3),height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},songs:{overflow:"scroll",width:"100%",flex:"1 1 auto"},song:{cursor:"pointer","&:hover":{background:e.palette.background.default}},noplaylist:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},dialog:Object(A.a)({},e.breakpoints.up("sm"),{width:"34rem"}),dialogcontent:{height:"23rem"},dropzone:{height:"6rem"}}})),Xe=Object(u.a)((function(){var e=z(),t=e.applicationStore.popup,n=e.spotifyStore.songs,a=Qe();return Object(r.jsxs)(r.Fragment,{children:["addMemory"===t&&Object(r.jsx)(Ue,{}),"addSong"===t&&Object(r.jsx)(Te,{}),Object(r.jsx)(le.a,{className:a.container,children:Object(r.jsx)(ue.a,{className:a.box,children:Object(r.jsx)(W.a,{container:!0,spacing:2,direction:"column",className:a.gridRoot,children:Object(r.jsx)(W.a,{item:!0,xs:12,className:a.songscontainer,children:Object(r.jsx)(oe.a,{className:a.songspaper,children:(null===n||void 0===n?void 0:n.length)?Object(r.jsx)(Je,{}):Object(r.jsx)(Ye,{})})})})})})]})})),Ze=Object(u.a)((function(){var e=z().applicationStore,t=e.initialize,n=e.nav;return Object(a.useEffect)((function(){t()}),[t]),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw",overflow:"hidden"},children:[Object(r.jsxs)(d.a,{children:[Object(r.jsx)("meta",{charSet:"utf-8"}),Object(r.jsx)("meta",{name:"theme-color",content:"#237fb1"}),Object(r.jsx)("title",{children:"Playlist Memories"})]}),"landing_page"!==n&&Object(r.jsx)(ae,{}),"landing_page"===n&&Object(r.jsx)(Y,{}),"host"===n&&Object(r.jsx)(We,{}),"guest"===n&&Object(r.jsx)(Xe,{})]})})),$e=n(113),et=Object($e.a)({palette:{type:"light",primary:{main:"#5F4B8BFF",contrastText:"#fefefe"},secondary:{main:"#E69A8DFF",contrastText:"#fefefe"},red:{main:"#ff0000"},error:{main:"#ab3030"},background:{default:"#f0f0f0"}}});i.a.render(Object(r.jsxs)(s.a,{theme:et,children:[Object(r.jsx)(c.a,{}),Object(r.jsx)(l.a,{maxSnack:3,children:Object(r.jsx)(Ze,{})})]}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.a6bf4b1f.chunk.js.map