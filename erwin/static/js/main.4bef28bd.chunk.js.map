{"version":3,"sources":["Item.js","App.js","index.js"],"names":["Item","_ref","title","image","onClick","active","react_default","a","createElement","className","concat","src","alt","App","_useState","useState","_useState2","Object","slicedToArray","initialized","setInitialized","_useState3","_useState4","playlists","setPlaylists","_useState5","_useState6","playlist","setPlaylist","_useState7","_useState8","songs","setSongs","_useState9","_useState10","song","setSong","_useState11","_useState12","text","setText","_useState13","_useState14","setImage","useEffect","setTimeout","initialize","fetch","then","response","data","JSON","parse","body","items","tracks","details","window","localStorage","getItem","_JSON$parse","txt","img","setItem","stringify","asyncToGenerator","regenerator_default","mark","_callee","search","token","wrap","_context","prev","next","location","href","includes","split","stop","apply","this","arguments","length","Fragment","index_es","icon","faArrowLeft","map","src_Item","name","images","url","id","s","artist","track","artists","album","type","accept","onChange","e","file","target","files","reader","FileReader","addEventListener","result","readAsDataURL","placeholder","value","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4bef28bd.chunk.js","sourcesContent":["import React from 'react';\n\nconst Item = ({ title, image, onClick, active }) => (\n  <div className={`item ${active ? 'active' : ''}`} onClick={onClick}>\n    <div className='image'><img src={image} alt='' /></div>\n    <div className='title'>{title}</div>\n  </div>\n);\n\nexport default Item;\n","import React, { useEffect, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\n\nimport Item from \"./Item\";\n\nconst App = () => {\n    const [initialized, setInitialized] = useState(false);\n    const [playlists, setPlaylists] = useState([]);\n    const [playlist, setPlaylist] = useState(null);\n    const [songs, setSongs] = useState([]);\n    const [song, setSong] = useState(null);\n    const [text, setText] = useState(\"\");\n    const [image, setImage] = useState(null);\n\n    useEffect(() => {\n        setTimeout(() => initialize(), 500);\n    }, []);\n\n    useEffect(() => {\n        if (initialized) {\n            fetch(\"https://52.49.219.94:5000/playlists\")\n                .then((response) => response.text())\n                .then((text) => {\n                    const data = JSON.parse(text);\n                    if (!data) return;\n                    setPlaylists(data.body.items);\n                });\n        }\n    }, [initialized]);\n\n    useEffect(() => {\n        if (playlist) {\n            fetch(`https://52.49.219.94:5000/songs/${playlist}`)\n                .then((response) => response.text())\n                .then((text) => {\n                    const data = JSON.parse(text);\n                    if (!data) return;\n                    setSongs(data.body.tracks.items);\n                });\n        }\n    }, [playlist]);\n\n    useEffect(() => {\n        if (song) {\n            setText(\"\");\n            setImage(null);\n            const details = window.localStorage.getItem(song);\n            if (details) {\n                const { txt, img } = JSON.parse(details);\n                setText(txt);\n                setImage(img);\n            }\n        }\n    }, [song]);\n\n    useEffect(() => {\n        if (song) {\n            window.localStorage.setItem(\n                song,\n                JSON.stringify({ img: image, txt: text })\n            );\n        }\n    }, [song, image, text]);\n\n    const connect = () => {\n        fetch(\"https://52.49.219.94:5000/authorize\")\n            .then((response) => response.text())\n            .then((text) => {\n                window.location = text;\n            });\n    };\n\n    const initialize = async () => {\n        const search = window.location.href;\n        if (search.includes(\"?code\")) {\n            const token = search.split(\"?code=\")[1];\n            fetch(`https://52.49.219.94:5000/access/${token}`).then(() => {\n                setInitialized(true);\n            });\n        }\n    };\n\n    const uploadImage = (e) => {\n        const file = e.target.files[0];\n        const reader = new FileReader();\n\n        reader.addEventListener(\n            \"load\",\n            function () {\n                setImage(reader.result);\n            },\n            false\n        );\n\n        if (file) {\n            reader.readAsDataURL(file);\n        }\n    };\n\n    const goBack = () => {\n        setSong(null);\n        setSongs([]);\n        setText(\"\");\n        setImage(null);\n        setPlaylist(null);\n    };\n\n    return (\n        <div className=\"container\">\n            <div className=\"items\">\n                <div className=\"title\">\n                    {!initialized ? (\n                        \"Connect with Spotify\"\n                    ) : !songs.length ? (\n                        \"Choose a playlist\"\n                    ) : (\n                        <>\n                            <FontAwesomeIcon\n                                icon={faArrowLeft}\n                                onClick={goBack}\n                            />\n                            Choose a song\n                        </>\n                    )}\n                </div>\n                <div>\n                    <>\n                        {!initialized && (\n                            <div className=\"connect\" onClick={connect}>\n                                Connect\n                            </div>\n                        )}\n                        {initialized && playlists.length && !songs.length ? (\n                            <>\n                                {playlists.map((playlist) => {\n                                    return (\n                                        <Item\n                                            title={playlist.name}\n                                            image={playlist.images[0].url}\n                                            onClick={() =>\n                                                setPlaylist(playlist.id)\n                                            }\n                                        />\n                                    );\n                                })}\n                            </>\n                        ) : null}\n                        {initialized && songs.length ? (\n                            <>\n                                {songs.map((s) => {\n                                    const artist = s.track.artists[0].name;\n                                    const title = s.track.name;\n                                    const image =\n                                        s.track.album.images[0] &&\n                                        s.track.album.images[0].url;\n                                    if (!s.track.id) return null;\n                                    return (\n                                        <Item\n                                            title={`${artist} - ${title}`}\n                                            image={image}\n                                            onClick={() => setSong(s.track.id)}\n                                            active={s.track.id === song}\n                                        />\n                                    );\n                                })}\n                            </>\n                        ) : null}\n                    </>\n                </div>\n            </div>\n            {song && (\n                <div className=\"details\">\n                    <div>\n                        <input\n                            type=\"file\"\n                            accept=\"image/*\"\n                            onChange={uploadImage}\n                        />\n                        <img src={image} alt=\"\" />\n                    </div>\n                    <textarea\n                        type=\"text\"\n                        placeholder=\"Type your memory here\"\n                        value={text}\n                        onChange={(e) => setText(e.target.value)}\n                    />\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}