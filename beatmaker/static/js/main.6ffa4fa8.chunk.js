(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(7),r=n.n(s),c=(n(88),n(16)),o=n(10),u=n(11),d=n(75),l=n(29),b=n(58),m=n.n(b),f=n(76),v=n(33),p=n(77),k=n(78),E=n(6),g=n(40),h=n(59),y=function(e,t){var n=e.file,a=e.start,i=e.end,s=e.volume,r=e.type,c=r?new h.Howl({src:[n],format:[r.split("/")[1]]}):new h.Howl({src:[n]}),o=c.duration()*(a/100),u=c.duration()*(i/100)-o;c.seek(o),c.volume(t?0:s),c.play(),setTimeout(function(){return c.stop()},1e3*u)},T=window.localStorage,C=function(){function e(){var t=this;Object(p.a)(this,e),this.initialize=function(){var e=t.get("beats");if(!e){e=[{id:"beat-1",name:"New beat"}],t.set("beats",e);t.set("beat-1",{id:"beat-1",name:"New beat",bpm:144,tickCount:4,ticks:[{id:0,sounds:[]},{id:1,sounds:[]},{id:2,sounds:[]},{id:3,sounds:[]},{id:4,sounds:[]},{id:5,sounds:[]},{id:6,sounds:[]},{id:7,sounds:[]},{id:8,sounds:[]},{id:9,sounds:[]},{id:10,sounds:[]},{id:11,sounds:[]},{id:12,sounds:[]},{id:13,sounds:[]},{id:14,sounds:[]},{id:15,sounds:[]}],sounds:[{id:1,file:"sounds/kick.wav",start:0,end:100,volume:1},{id:2,file:"sounds/hihat.wav",start:0,end:100,volume:1},{id:3,file:"sounds/snare.wav",start:0,end:100,volume:1},{id:4,file:"sounds/clap.wav",start:0,end:100,volume:1},{id:5,file:"sounds/perc.wav",start:0,end:100,volume:1},{id:6,file:"sounds/808.wav",start:0,end:100,volume:1}]})}var n=t.get("beat-1");t.beat=n,t.bpm=n.bpm,t.sounds=n.sounds,t.tickCount=n.tickCount,t.ticks=n.ticks,t.sounds.forEach(function(e){if(e.base64){var t=Object(g.a)(e.base64);e.file=URL.createObjectURL(t)}}),t.beat.sounds=Object(c.a)(t.sounds),t.set(t.beat.id,t.beat)},this.nextTick=function(){if(t.playing){var e=t.currentTick+1;e===t.tickCount*t.stepsPerTick?t.currentTick=0:t.currentTick=e}},this.addBpm=function(e){t.beat.bpm+e!==181&&t.beat.bpm+e!==59&&(t.beat.bpm=t.beat.bpm+e,t.set(t.beat.id,t.beat))},this.addTickCount=function(e){t.beat.tickCount+e!==17&&t.beat.tickCount+e!==3&&(t.beat.tickCount=t.beat.tickCount+e,t.set(t.beat.id,t.beat))},this.playSounds=function(){t.beat.ticks.length&&t.beat.ticks[t.currentTick].sounds.forEach(function(e){var n=t.beat.sounds.find(function(t){return t.id===e});y(n)})},this.toggleSound=function(e,n){if(t.beat.ticks[n].sounds.includes(e)){var a=t.beat.ticks[n].sounds.indexOf(e);t.beat.ticks[n].sounds.splice(a,1),t.setTicks(Object(c.a)(t.beat.ticks))}else t.beat.ticks[n].sounds.push(e),t.setTicks(Object(c.a)(t.beat.ticks))},this.setCurrentTick=function(e){t.currentTick=e},this.setTime=function(e,n){var a=Object(v.a)(n,2),i=a[0],s=a[1],r=t.beat.sounds.findIndex(function(t){return t.id===e});t.beat.sounds[r].start=i,t.beat.sounds[r].end=s,t.beat.sounds=Object(c.a)(t.beat.sounds),t.set(t.beat.id,t.beat)},this.setTicks=function(e){e.length&&(t.beat.ticks=e,t.set(t.beat.id,t.beat))},this.setTid=function(e){t.tid=e},this.setVolume=function(e,n){var a=t.beat.sounds.findIndex(function(t){return t.id===e});t.beat.sounds[a].volume=n,t.beat.sounds=Object(c.a)(t.beat.sounds),t.set(t.beat.id,t.beat)},this.setFile=function(){var e=Object(f.a)(m.a.mark(function e(n,a){var i,s,r,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return t.setError("No file found"),e.abrupt("return");case 5:if(a.type.startsWith("audio")){e.next=10;break}return t.setError("No audiofile. Found type: ".concat(a.type)),e.abrupt("return");case 10:if(!(a.size>1e6)){e.next=13;break}return t.setError("File too large, max 1MB. Found size: ".concat((a.size/1e6).toFixed(2),"MB")),e.abrupt("return");case 13:return e.next=15,Object(g.b)(a);case 15:return i=e.sent,e.next=18,Object(g.a)(i);case 18:s=e.sent,r=URL.createObjectURL(s),o=t.beat.sounds.findIndex(function(e){return e.id===n}),t.beat.sounds[o].file=r,t.beat.sounds[o].base64=i,t.beat.sounds[o].type=a.type,t.beat.sounds=Object(c.a)(t.beat.sounds),t.set(t.beat.id,t.beat),y(t.beat.sounds[o],!0);case 27:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.setName=function(e){t.beat.name=e.target.value,t.set(t.beat.id,t.beat)},this.setPlaying=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!t.playing;t.playing=e},this.setError=function(e){t.error=e,setTimeout(function(){return t.error=""},4e3)},this.beat={},this.stepsPerTick=4,this.currentTick=0,this.tid=0,this.playing=!1,this.playSound=y,this.error=""}return Object(k.a)(e,[{key:"get",value:function(e){return JSON.parse(T.getItem(e))}},{key:"set",value:function(e,t){T.setItem(e,JSON.stringify(t))}}]),e}();Object(E.d)(C,{initialize:E.b,stepsPerTick:E.f,currentTick:E.f,tid:E.f,beat:E.f,playing:E.f,error:E.f,nextTick:E.b,addBpm:E.b,addTickCount:E.b,toggleSound:E.b,setCurrentTick:E.b,setTime:E.b,setTicks:E.b,setTid:E.b,setFile:E.b,setPlaying:E.b,uploadConfig:E.b,setError:E.b});var O=new C,w=i.a.createContext({beatmakerStore:O}),j=Object(l.a)(function(){var e=Object(a.useContext)(w).beatmakerStore,t=e.error,n=e.setError;return i.a.createElement("div",{className:"error ".concat(t.length?"error-active":"")},t,i.a.createElement(o.a,{icon:u.g,onClick:function(){return n("")}}))}),N=[{id:1,color:"#60d394"},{id:2,color:"#d36060"},{id:3,color:"#c060d3"},{id:4,color:"#d3d160"},{id:5,color:"#6860d3"},{id:6,color:"#60b2d3"}],x=function(e){var t=e.id,n=e.sounds,a=e.active,s=e.toggleSound,r=e.style;return i.a.createElement("div",{className:"tick ".concat(a?"active":""),style:r},N.map(function(e){return i.a.createElement("div",{key:e.id,className:"sound-in-tick",style:{background:e.color,opacity:n.includes(e.id)?"1":"0.2"},onClick:function(){return s(e.id,t)}})}))},S=n(60),F=(n(148),n(82)),I=n.n(F),P=function(e){var t=e.src,n=(e.id,e.time),s=Object(a.useState)(null),r=Object(v.a)(s,2),c=r[0],o=r[1],u=Object(a.useState)(!1),d=Object(v.a)(u,2),l=d[0],b=d[1];return Object(a.useEffect)(function(){c&&(b(!1),c.innerHTML="",I.a.create({container:c,waveColor:"gray",progressColor:"transparent",cursorWidth:"0",height:"80",responsive:!0}).load(t))},[c,t]),i.a.createElement("div",{className:"waveform"},l&&i.a.createElement("div",{className:"error"},"NO AUDIO"),i.a.createElement("div",{className:"start",style:{width:"".concat(n[0],"%")}}),i.a.createElement("div",{className:"end",style:{width:"".concat(100-n[1],"%")}}),i.a.createElement("div",{className:"wave",ref:o}))},z=[{id:1,color:"#60d394"},{id:2,color:"#d36060"},{id:3,color:"#c060d3"},{id:4,color:"#d3d160"},{id:5,color:"#6860d3"},{id:6,color:"#60b2d3"}],B=Object(l.a)(function(e){var t=e.sound,n=e.sound,s=n.id,r=n.file,c=n.start,d=n.end,l=n.volume,b=Object(a.useContext)(w).beatmakerStore,m=b.playSound,f=b.setTime,v=b.setVolume,p=b.setFile;return i.a.createElement("div",{className:"sound-container",style:{background:z.find(function(e){return e.id===s}).color}},i.a.createElement("div",null,i.a.createElement("div",{onClick:function(){return m(t)},className:"button"},i.a.createElement(o.a,{icon:u.c})),i.a.createElement("div",{className:"button"},i.a.createElement("input",{type:"file",name:"file",onChange:function(e){p(s,e.target.files[0])}}),i.a.createElement(o.a,{icon:u.h}))),i.a.createElement("div",{className:"wave"},i.a.createElement(P,{src:r,time:[c,d]}),i.a.createElement("div",{className:"range-container"},i.a.createElement(S.a,{min:0,max:100,value:[c,d],pushable:5,onChange:function(e){return f(s,e)}}))),i.a.createElement("div",{className:"volume"},i.a.createElement(S.b,{vertical:!0,min:0,max:100,value:100*l,onChange:function(e){return v(s,e/100)}})))}),L=Object(l.a)(function(){var e=Object(a.useContext)(w).beatmakerStore,t=e.initialize,n=e.beat,s=n.bpm,r=n.tickCount,l=n.ticks,b=n.sounds,m=n.name,f=e.stepsPerTick,v=e.currentTick,p=e.tid,k=e.playing,E=e.nextTick,g=e.addBpm,h=e.addTickCount,y=e.playSounds,T=e.toggleSound,C=e.setCurrentTick,O=e.setTicks,N=e.setTid,S=e.setPlaying,F=e.setName;return Object(a.useEffect)(function(){k&&y(),N(setTimeout(E,6e4/(4*s)))},[v]),Object(a.useEffect)(function(){if(l){var e=l.length;if(e<r*f)for(var t=0;t<f;t++)l.push({id:e+t,sounds:[]});else e>r*f&&l.splice(-f,f);O(Object(c.a)(l))}},[r]),Object(a.useEffect)(function(){k?(y(),N(setTimeout(E,6e4/(4*s)))):clearTimeout(p)},[k]),Object(a.useEffect)(function(){t()},[]),i.a.createElement("div",{id:"app",onKeyDown:function(e){32===e.keyCode&&"text"!==e.target.type&&S()},tabIndex:"0"},i.a.createElement(j,null),d.isMobile?i.a.createElement("div",{className:"mobile"},i.a.createElement(o.a,{icon:u.a}),i.a.createElement("p",null,"Deze app wordt niet ondersteund op dit apparaat. Gebruik een laptop of PC om de app te gebruiken.")):i.a.createElement(a.Fragment,null,i.a.createElement("div",{id:"header"},i.a.createElement("div",{id:"playback"},i.a.createElement("div",{id:"play-pause",className:k?"playing":"",onClick:function(){return S(!k)}},k?i.a.createElement(o.a,{icon:u.b}):i.a.createElement(o.a,{icon:u.c})),i.a.createElement("div",{onClick:function(){S(!1),C(0)}},i.a.createElement(o.a,{icon:u.f}))),i.a.createElement("div",{id:"settings"},i.a.createElement("div",null,i.a.createElement("div",{className:"counter"},s," BPM"),!k&&i.a.createElement("div",null,i.a.createElement("div",{onClick:function(){return g(1)}},i.a.createElement(o.a,{icon:u.e})),i.a.createElement("div",{onClick:function(){return g(-1)}},i.a.createElement(o.a,{icon:u.d})))),i.a.createElement("div",null,i.a.createElement("div",{className:"counter"},r," TICKS"),!k&&i.a.createElement("div",null,i.a.createElement("div",{onClick:function(){return h(1)}},i.a.createElement(o.a,{icon:u.e})),i.a.createElement("div",{onClick:function(){return h(-1)}},i.a.createElement(o.a,{icon:u.d})))),i.a.createElement("div",{className:"name"},i.a.createElement("input",{value:m||"",onChange:F})))),i.a.createElement("div",{id:"tabs"},i.a.createElement("div",{id:"ticks"},l&&l.map(function(e){var t=34*l.length+15*r,n=l.length/2===e.id&&t>window.innerWidth;return i.a.createElement(i.a.Fragment,{key:e.id},n&&i.a.createElement("br",null),i.a.createElement(x,{key:e.id,id:e.id,sounds:e.sounds,active:v===e.id,toggleSound:T,style:{marginRight:e.id%4===3?"15px":"2px"}}))}))),i.a.createElement("div",{id:"pads"},b&&b.map(function(e){return i.a.createElement(B,{key:e.id,sound:e})}))))});r.a.render(i.a.createElement(L,null),document.getElementById("root"))},83:function(e,t,n){e.exports=n(149)},88:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.6ffa4fa8.chunk.js.map