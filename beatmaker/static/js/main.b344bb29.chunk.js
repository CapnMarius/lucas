(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(16),o=n.n(c),r=n(43),d=n(45),s=n.n(d),l=(n(111),n(10)),u=n(5),f=n(3),m=n(4),v=n(46),E=[{id:1,color:"#60d394"},{id:2,color:"#d36060"},{id:3,color:"#c060d3"},{id:4,color:"#d3d160"},{id:5,color:"#6860d3"},{id:6,color:"#60b2d3"}],p=function(e){var t=e.id,n=e.sounds,a=e.active,c=e.toggleSound,o=e.style;return i.a.createElement("div",{className:"tick ".concat(a?"active":""),style:o},E.map(function(e){return i.a.createElement("div",{key:e.id,className:"sound-in-tick",style:{background:e.color,opacity:n.includes(e.id)?"1":"0.2"},onClick:function(){return c(e.id,t)}})}))},b=n(47),h=n(48),k=n(51),O=n(49),j=n(52),w=n(50),g=n.n(w),y=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(k.a)(this,Object(O.a)(t).call(this,e))).state={},n}return Object(j.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.$el=o.a.findDOMNode(this),this.$waveform=this.$el.querySelector(".wave"),this.wavesurfer=g.a.create({container:this.$waveform,waveColor:"gray",progressColor:"black",height:"80",responsive:!0}),this.wavesurfer.load(this.props.src),this.wavesurfer.seekTo(this.props.startAt),this.wavesurfer.on("seek",this.props.onSeek)}},{key:"render",value:function(){return i.a.createElement("div",{className:"waveform"},i.a.createElement("div",{className:"wave"}))}}]),t}(i.a.Component),C=[{id:1,color:"#60d394"},{id:2,color:"#d36060"},{id:3,color:"#c060d3"},{id:4,color:"#d3d160"},{id:5,color:"#6860d3"},{id:6,color:"#60b2d3"}],S=function(e){var t=e.id,n=e.file,a=e.startAt,c=e.onPlay,o=e.setTime;return i.a.createElement("div",{className:"sound-container",style:{background:C.find(function(e){return e.id===t}).color}},i.a.createElement("div",null,i.a.createElement("div",{onClick:function(){return c(t)},className:"button"},i.a.createElement(f.a,{icon:m.c}))),i.a.createElement("div",null,i.a.createElement(y,{src:n,onSeek:function(e){return o(t,e)},startAt:a})))},A=function(e,t){e.sound.seek(t),e.sound.play()},N=function(){var e=Object(a.useState)(144),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(8),r=Object(u.a)(o,2),d=r[0],s=r[1],E=Object(a.useState)(0),b=Object(u.a)(E,2),h=b[0],k=b[1],O=Object(a.useState)([]),j=Object(u.a)(O,2),w=j[0],g=j[1],y=Object(a.useState)(0),C=Object(u.a)(y,2),N=C[0],x=C[1],T=Object(a.useState)([]),I=Object(u.a)(T,2),B=I[0],D=I[1],J=Object(a.useState)([]),R=Object(u.a)(J,2),P=R[0],$=R[1],M=Object(a.useState)(!1),U=Object(u.a)(M,2),F=U[0],K=U[1],q=function(){if(F){var e=h+1;k(e===4*d?0:e)}},H=function(e){n+e!==181&&n+e!==59&&c(n+e)},W=function(e){d+e!==17&&d+e!==3&&s(d+e)},_=function(){w.length&&w[h].sounds.forEach(function(e){var t=P.find(function(t){return t.id===e}),n=B.find(function(t){return t.id===e}).startAt;A(t,n)})},z=function(e,t){if(w[t].sounds.includes(e)){var n=w[t].sounds.indexOf(e);w[t].sounds.splice(n,1),g(Object(l.a)(w))}else w[t].sounds.push(e),g(Object(l.a)(w))},G=function(e,t){var n=B.findIndex(function(t){return t.id===e}),a=P.find(function(t){return t.id===e});B[n].startAt=a.sound.duration()*t,D(Object(l.a)(B))};return Object(a.useEffect)(function(){B.forEach(function(e){e.preload="auto"});for(var e=0;e<4*d;e++)w.push({id:e,sounds:[]});g(w),D([{id:1,file:"sounds/kick.wav",startAt:0},{id:2,file:"sounds/hihat.wav",startAt:0},{id:3,file:"sounds/snare.wav",startAt:0},{id:4,file:"sounds/clap.wav",startAt:0},{id:5,file:"sounds/perc.wav",startAt:0},{id:6,file:"sounds/808.wav",startAt:0}])},[]),Object(a.useEffect)(function(){$([]),B.forEach(function(e){P.push({id:e.id,sound:new v.Howl({src:[e.file]})})}),$(Object(l.a)(P))},[B]),Object(a.useEffect)(function(){F&&_(),x(setTimeout(q,6e4/(4*n)))},[h]),Object(a.useEffect)(function(){var e=w.length;if(e<4*d)for(var t=0;t<4;t++)w.push({id:e+t,sounds:[]});else e>4*d&&w.splice(-4,4);g(Object(l.a)(w))},[d]),Object(a.useEffect)(function(){F?(_(),setTimeout(q,6e4/(4*n))):clearTimeout(N)},[F]),i.a.createElement("div",{id:"app",onKeyDown:function(e){32===e.keyCode&&K(!F)},tabIndex:"0"},i.a.createElement("div",{id:"header"},i.a.createElement("div",{id:"playback"},i.a.createElement("div",{id:"play-pause",className:F?"playing":"",onClick:function(){return K(!F)}},F?i.a.createElement(f.a,{icon:m.b}):i.a.createElement(f.a,{icon:m.c})),i.a.createElement("div",{onClick:function(){K(!1),k(0)}},i.a.createElement(f.a,{icon:m.f}))),i.a.createElement("div",{id:"settings"},i.a.createElement("div",null,i.a.createElement("div",{className:"counter"},n," BPM"),!F&&i.a.createElement("div",null,i.a.createElement("div",{onClick:function(){return H(1)}},i.a.createElement(f.a,{icon:m.e})),i.a.createElement("div",{onClick:function(){return H(-1)}},i.a.createElement(f.a,{icon:m.d})))),i.a.createElement("div",null,i.a.createElement("div",{className:"counter"},d," TICKS"),!F&&i.a.createElement("div",null,i.a.createElement("div",{onClick:function(){return W(1)}},i.a.createElement(f.a,{icon:m.e})),i.a.createElement("div",{onClick:function(){return W(-1)}},i.a.createElement(f.a,{icon:m.d}))))),i.a.createElement("div",{id:"download"},i.a.createElement("div",null,i.a.createElement("input",{type:"file",name:"file",onChange:function(e){if(e.target.files[0]){var t=new FileReader;t.onload=function(e){var t=JSON.parse(e.target.result);"bpm"in t&&"sounds"in t&&"tickCount"in t&&"ticks"in t&&(c(t.bpm),g(t.ticks),D(t.sounds),s(t.tickCount))},t.readAsText(e.target.files[0])}}}),i.a.createElement(f.a,{icon:m.g})),i.a.createElement("div",{onClick:function(){!function(e){if(window.navigator&&window.navigator.msSaveOrOpenBlob){var t=new Blob([decodeURIComponent(encodeURI(JSON.stringify(e)))],{type:"application/json;charset=utf-8;"});navigator.msSaveOrOpenBlob(t,"config.json")}else{var n=document.createElement("a");n.download="config.json",n.href="data:application/json;charset=utf-8;,"+encodeURIComponent(JSON.stringify(e)),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}({bpm:n,ticks:w,sounds:B,tickCount:d})}},i.a.createElement(f.a,{icon:m.a})))),i.a.createElement("div",{id:"tabs"},i.a.createElement("div",{id:"ticks"},w.map(function(e){var t=34*w.length+15*d,n=w.length/2===e.id&&t>window.innerWidth;return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement("br",null),i.a.createElement(p,{key:e.id,id:e.id,sounds:e.sounds,active:h===e.id,toggleSound:z,style:{marginRight:e.id%4===3?"15px":"2px"}}))}))),i.a.createElement("div",{id:"pads"},B.map(function(e){return i.a.createElement(S,{key:e.id,id:e.id,onPlay:function(){return A(P.find(function(t){return t.id===e.id}),e.startAt)},file:e.file,setTime:G,startAt:e.startAt})})))};o.a.render(i.a.createElement(r.DragDropContextProvider,{backend:s.a},i.a.createElement(N,null)),document.getElementById("root"))},53:function(e,t,n){e.exports=n(117)}},[[53,1,2]]]);
//# sourceMappingURL=main.b344bb29.chunk.js.map